# Forms *`v0.0.1`*

Валидация, отправка и обработка ответа на форму
Во время импорта файла forms/index.js устанавливается дополнительные плагины в jquery: validateForm, destroyValidateForm.
Инициализировать проверку и последующую отправку формы на форме: **`$(selector).validateForm();`** <br>
Очистка формы: **`$(selector).resetForm();`** <br>
Удаление фалидации с формы (если больше не используется форма): **`$(selector).destroyValidateForm();`**
Чтобы нельзя было отправить неправильную форму до загрузки js, лучше все элементы формы обернуты в `<fieldset>` с аттрибутом disabled, после загрузки валидации разблокирует форму (нужно указать класс в дата-аттрибуте или передеть селектор через параметр)

 ##  Зависит от пакетов
1. jquery
1. jquery-mask-plugin
1. jquery-validation
1. Bootstrap: util, index

 ##  Зависит от компонентов
1. components/preloader
1. components/toast

 ## Настройки через data атрибуты
  1. valid-${type} - Правила валидации (required, white-space-only, minlength ...)
  1. error-${type} - Текст сообщения для правила валидации
  1. recaptcha_key
  1. buttonId - кнопка для отправки формы, если вне формы (чтобы блокировать во время отправки и активировать прелоадер)
  1. id_message_success - контейнер для сообщения после успешной отправки (Не динамический - заложенный в верстке, но скрытый).
  1. id_datepicker - если на форме был datepicker, то перед вставкой шаблона уничтожить datepicker
  1. id_target - контейнер для вставки нового шаблона из ответа от сервера
  1. place_server_message - селектор контейнера для вставки сообщения от сервера. default '.js--server_message'
  1. data-lock-class - класс (без точки) например "js--validate_form_fieldset". Если все элементы формы обернуты в fieldset disabled, после загрузки валидации разблокирует форму (иначе можно отправить неправильную форму до загрузки js)

 ## Настройки через параметры функции
 вызывать **`$(selector).validateForm();`**
 1. onlyCustomHandler: true - применять только пользовательские события
 1. unlockFieldset: '.js--validate_form_fieldset' - Если все элементы формы обернуты в fieldset disabled, после загрузки валидации разблокирует форму (иначе можно отправить неправильную форму до загрузки js)


 ## Пользовательские события
 1. validateForm.beforeSend -
 1. validateForm.success
 1. validateForm.complete
 1. validateForm.error
 1. validateForm.targetPaste.done - не работает, нужно продумать, чтобы сначала выполнять событие, потом удалять/заменять форму/контейнер
 1. validateForm.donePastTemplate - Работает если вставляется дополнительная шаблон из ответа (не удаляется/заменяется текущий)

Желательно использовать с маской ввода телефона типа **`$('.js--phone').mask('+38(000) 000-00-00');`**
Также удобно использовать form_element чтобы выводить ошибку от сервера под соответсвующим полем

## Задачи на доработку, улучшение
1. Привести к единому стилю data атрибуты
1. Сделать те же настройки, что в data атрибутах, и через паремтры вызова  validateForm(options)
1. validateForm.targetPaste.done - не работает, нужно продумать, чтобы сначала выполнять событие, потом удалять/заменять форму/контейнер
1. Доделать toasts, чтобы можно было получать несколько сообщений и разного типа, склонения в таймере (минут, минута, минуты)
1. Настроить режимы работы: Только валидация, только отправка ajax,
1. Продумать понятное имя для плагина и его методов. Также для параметров и data атрибутов
